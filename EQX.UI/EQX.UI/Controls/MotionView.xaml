<UserControl x:Class="EQX.UI.Controls.MotionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:EQX.UI.Controls"
             xmlns:motion="clr-namespace:EQX.Motion;assembly=EQX.Motion"
             xmlns:uiControls="clr-namespace:EQX.UI.Controls"
             Height="240"
             Width="250"
             mc:Ignorable="d"
             xmlns:controls="clr-namespace:EQX.UI.Controls"
             d:DataContext="{d:DesignInstance Type={x:Type motion:MotionBase}}"
             Background="White">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="35" />
            <RowDefinition Height="50" />
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>

        <!-- Motion Name Header -->
        <Border Margin="2"
                Height="25"
                BorderThickness="1"
                BorderBrush="{StaticResource HighLightBorderBrush}">
            <TextBlock
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                FontSize="12"
                FontWeight="Bold">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}[{0}] {1}">
                        <Binding Path="Id"/>
                        <Binding Path="Name"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </Border>

        <!-- Current Position, Limit Status -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="50"/>
            </Grid.ColumnDefinitions>
            <Border Margin="1 1 0 1"
                    Grid.Column="0"
                    Background="{Binding Status.HwNegLimitDetect, Converter={StaticResource BooleanToAlarmBrushConverter}}"
                    BorderThickness="1"
                    BorderBrush="{StaticResource PrimaryBorderBrush}">
                <TextBlock Text="Lmt. (-)"
                           FontWeight="Bold"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           FontSize="12"
                           TextWrapping="Wrap">
                </TextBlock>
            </Border>
            <Border Margin="0 1"
                    Grid.Column="1"
                    BorderBrush="{StaticResource PrimaryBorderBrush}">
                <TextBox Background="MintCream"
                         FontSize="20"
                         VerticalContentAlignment="Center"
                         HorizontalContentAlignment="Center"
                         Text="{Binding Status.ActualPosition, Mode=OneWay, StringFormat='{}{0:0.###} mm'}"
                         IsReadOnly="True" />
            </Border>
            <Border Margin="0 1 1 1"
                    Grid.Column="2"
                    Background="{Binding Status.HwPosLimitDetect,Converter={StaticResource BooleanToAlarmBrushConverter}}"
                    BorderThickness="1"
                    BorderBrush="{StaticResource PrimaryBorderBrush}">
                <TextBlock Text="Lmt. (+)"
                           FontWeight="Bold"
                           TextAlignment="Center"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           FontSize="12"
                           TextWrapping="Wrap"/>
            </Border>
        </Grid>

        <!-- Jog / Inc Motion -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <uiControls:ImageButton Width="45"
                                        Margin="1"
                                        Padding="0"
                                        Grid.Column="0"
                                        PreviewMouseLeftButtonDown="MoveDec_ButtonDown"
                                        PreviewMouseLeftButtonUp="MoveButton_ButtonUp">
                    <Image Source="{StaticResource image_left_selected}" />
                </uiControls:ImageButton>
                <ComboBox Grid.Column="1"
                          FontSize="12"
                          x:Name="cbBoxStepInc"
                          SelectedIndex="0"
                          SelectionChanged="cbBoxStepInc_SelectionChanged" />
                <uiControls:ImageButton Width="45"
                                        Margin="1"
                                        Padding="0"
                                        Grid.Column="2"
                                        PreviewMouseLeftButtonDown="MoveInc_ButtonDown"
                                        PreviewMouseLeftButtonUp="MoveButton_ButtonUp">
                    <Image Source="{StaticResource image_right_selected}" />
                </uiControls:ImageButton>
            </Grid>
            <CheckBox Grid.Column="1"
                      Width="50"
                      Margin="1"
                      Name="JogMode"
                      Click="JogMode_Click">
                <CheckBox.Style>
                    <Style TargetType="{x:Type CheckBox}">
                        <Style.Setters>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type CheckBox}">
                                        <Border Height="{TemplateBinding Height}"
                                            Width="{TemplateBinding Width}">
                                            <Grid>
                                                <TextBlock HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Foreground="{TemplateBinding Foreground}"
                                                    Margin="{TemplateBinding Padding}"
                                                    Text="{TemplateBinding Content}"
                                                    TextWrapping="WrapWithOverflow"
                                                    TextAlignment="Center" />
                                            </Grid>

                                            <Border.Style>
                                                <Style TargetType="{x:Type Border}">
                                                    <Style.Setters>
                                                        <Setter Property="Background"
                                                            Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background}" />

                                                        <Setter Property="BorderBrush"
                                                            Value="#d3d5d6" />

                                                        <Setter Property="BorderThickness"
                                                            Value="1" />

                                                        <Setter Property="CornerRadius"
                                                            Value="3" />
                                                    </Style.Setters>
                                                </Style>
                                            </Border.Style>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>

                            <Setter Property="IsChecked"
                                    Value="True" />
                            <Setter Property="Content"
                                    Value="Jog Mode" />
                            
                            <Setter Property="Background"
                                Value="#fafbfc" />

                            <Setter Property="Foreground"
                                Value="#24292e" />

                            <Setter Property="FontWeight"
                                Value="Bold" />

                            <Setter Property="Padding"
                                Value="5" />

                            <Setter Property="Cursor"
                                Value="Hand" />
                        </Style.Setters>
                        <Style.Triggers>
                            <Trigger Property="IsChecked"
                                Value="False">
                                <Setter Property="Content"
                                    Value="Inc. Mode" />

                                <Setter Property="Foreground"
                                    Value="{StaticResource HighLightBackgroundColor}" />
                            </Trigger>

                            <Trigger Property="IsMouseOver"
                                    Value="True">
                                <Setter Property="Background"
                                    Value="#f3f4f6" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </CheckBox.Style>
            </CheckBox>
        </Grid>

        <!-- Origin -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Ellipse Margin="10 0"
                     Width="26"
                     Height="26"
                     Fill="{Binding Status.IsHomeDone,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                     Stroke="{StaticResource PrimaryBorderBrush}"
                     StrokeThickness="1" />
            <local:ImageButton Grid.Column="1"
                               Content="{DynamicResource str_Origin}"
                               FontWeight="Bold"
                               Margin="2"
                               HorizontalAlignment="Stretch"
                               Click="ButtonOrigin_Click" />
        </Grid>

        <!-- Servo ON/OFF -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Ellipse Margin="10 0"
                     Width="26"
                     Height="26"
                     Fill="{Binding Status.IsMotionOn,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                     Stroke="{StaticResource PrimaryBorderBrush}"
                     StrokeThickness="1" />
            <uiControls:ImageButton Grid.Column="1"
                                    Content="{DynamicResource str_ServoOn}"
                                    FontWeight="Bold"
                                    Click="ButtonServoOn_Click"
                                    Margin="2" />
        </Grid>

        <!-- Alarm Reset -->
        <Grid Grid.Row="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Ellipse Margin="10 0"
                     Width="26"
                     Height="26"
                     Fill="{Binding Status.IsAlarm,Converter={StaticResource BooleanToOnOffBrushConverter}, ConverterParameter=true}"
                     Stroke="{StaticResource PrimaryBorderBrush}"
                     StrokeThickness="1" />
            <local:ImageButton Grid.Column="1"
                               Content="{DynamicResource str_AlarmReset}"
                               FontWeight="Bold"
                               Margin="2"
                               HorizontalAlignment="Stretch"
                               Click="ButtonResetAlarm_Click" />
        </Grid>

        <!-- Servo Stop -->
        <Grid Grid.Row="6">
            <local:ImageButton Grid.Column="0"
                       Content="{DynamicResource str_Stop}"
                       FontWeight="Bold"
                       Margin="2"
                       HorizontalAlignment="Stretch"
                       Click="ButtonStop_Click" />
        </Grid>
    </Grid>
</UserControl>
